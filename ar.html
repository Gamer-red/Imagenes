<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AR Mundial 2026</title>

  <!-- A-Frame y MindAR -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
  <link rel="stylesheet" href="ar.css">
</head>
<body>

  <!-- Contenedor de botones -->
  <div id="info-box" style="display: none;">
    <div class="button-group">
      <button class="info-button">🎥 Video</button>
      <button class="info-button">📊 Estadísticas</button>
      <button class="info-button">❓ Trivias</button>
      <button class="info-button">🌀 Animación 3D</button>
    </div>
  </div>

  <div id="video-container" style="display: none; position: fixed; top: 10%; left: 10%; width: 20%; background: rgba(0,0,0,0.9); padding: 20px; z-index: 999;">
  <button id="close-video" style="float: right; font-size: 20px; background: red; color: white; border: none; padding: 5px 10px; cursor: pointer;">X</button>
  <video id="video-player" width="100%" controls>
    <source src="./assets/video.mp4" type="video/mp4">
    Tu navegador no soporta video HTML5.
  </video>
</div>

<div id="stats-container" style="display: none; position: fixed; top: 15%; left: 15%; width: 30%; background: rgba(255, 255, 255, 0.95); padding: 20px; z-index: 999; border: 2px solid #333; border-radius: 10px;">
  <button id="close-stats" style="float: right; font-size: 20px; background: red; color: white; border: none; padding: 5px 10px; cursor: pointer;">X</button>
  <h3>📊 Estadísticas Mundial 2026</h3>
  <ul style="padding-left: 20px;">
    <li>Partidos en México: 10</li>
    <li>Sedes: CDMX, Guadalajara, Monterrey</li>
    <li>Capacidad total estimada: +150,000 personas</li>
    <li>Fechas: Junio - Julio 2026</li>
  </ul>
</div>

<div id="trivia-container" style="display: none; position: fixed; top: 20%; left: 20%; width: 40%; background: #fff; border: 2px solid #000; border-radius: 10px; padding: 20px; z-index: 999;">
  <button id="close-trivia" style="float: right; font-size: 20px; background: red; color: white; border: none; padding: 5px 10px; cursor: pointer;">X</button>
  <h3>❓ Trivia Mundial 2026</h3>
  <p><strong>¿Cuántas ciudades mexicanas serán sede del Mundial 2026?</strong></p>
  <div>
    <button class="trivia-option" data-correct="false">2</button>
    <button class="trivia-option" data-correct="true">3</button>
    <button class="trivia-option" data-correct="false">4</button>
  </div>
  <p id="trivia-feedback" style="margin-top: 15px; font-weight: bold;"></p>
</div>

  <!-- Escena AR -->
  <a-scene
    mindar-image="imageTargetSrc: ./assets/targets.mind;"
    vr-mode-ui="enabled:false"
    device-orientation-permission-ui="enabled: false"
  >
    <a-assets>
      <a-asset-item id="modelo-glb" src="./assets/Bandera_Mexico.glb"></a-asset-item>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0" id="mexico-target">
        <a-entity 
          id="modelo-animado"
          gltf-model="#modelo-glb" 
          position="0 -0.25 0" 
          scale="0.05 0.05 0.05" 
          rotation="0 0 0">
      </a-entity>
      <!-- Texto en AR -->
        <a-text 
          value="México será una de las sedes del Mundial 2026,\ncon partidos en CDMX, Guadalajara y Monterrey."
          position="0 0.5 0"
          align="center"
          color="black"
          width="1"
        ></a-text>
    </a-entity>

  </a-scene>

  <script>
    const target = document.getElementById('mexico-target');
    const infoBox = document.getElementById('info-box');

    target.addEventListener('targetFound', () => {
      infoBox.style.display = 'block';
    });

    target.addEventListener('targetLost', () => {
      infoBox.style.display = 'none';
    }); 
      // 🎥 Funcionalidad del botón de video
    const videoButton = document.querySelectorAll('.info-button')[0]; // Primer botón
    const videoContainer = document.getElementById('video-container');
    const closeVideoBtn = document.getElementById('close-video');
    const videoPlayer = document.getElementById('video-player');
    const statsButton = document.querySelectorAll('.info-button')[1]; // Segundo botón
    const statsContainer = document.getElementById('stats-container');
    const closeStatsBtn = document.getElementById('close-stats');
    const triviaButton = document.querySelectorAll('.info-button')[2]; // Tercer botón
    const triviaContainer = document.getElementById('trivia-container');
    const closeTriviaBtn = document.getElementById('close-trivia');
    const triviaOptions = document.querySelectorAll('.trivia-option');
    const triviaFeedback = document.getElementById('trivia-feedback');
    const animButton = document.querySelectorAll('.info-button')[3]; // Botón animación 3D
    const modelo = document.getElementById('modelo-animado');

    videoButton.addEventListener('click', () => {
      videoContainer.style.display = 'block';
      videoPlayer.play();
    });

    closeVideoBtn.addEventListener('click', () => {
      videoContainer.style.display = 'none';
      videoPlayer.pause();
      videoPlayer.currentTime = 0;
    });
    statsButton.addEventListener('click', () => {
      statsContainer.style.display = 'block';
    });

    closeStatsBtn.addEventListener('click', () => {
      statsContainer.style.display = 'none';
    });

    triviaButton.addEventListener('click', () => {
      triviaContainer.style.display = 'block';
      triviaFeedback.textContent = '';
      triviaOptions.forEach(btn => btn.disabled = false);
    });

    closeTriviaBtn.addEventListener('click', () => {
      triviaContainer.style.display = 'none';
    });

    triviaOptions.forEach(option => {
      option.addEventListener('click', () => {
        const isCorrect = option.getAttribute('data-correct') === 'true';
        triviaFeedback.textContent = isCorrect ? '✅ ¡Correcto!' : '❌ Incorrecto. Inténtalo de nuevo.';
        triviaFeedback.style.color = isCorrect ? 'green' : 'red';
        triviaOptions.forEach(btn => btn.disabled = true); // Desactiva botones después de responder
      });
    let animationActive = false;
let animationId = null;
let startTime = null;

function animateModel(time) {
  if (!startTime) startTime = time;
  const elapsed = time - startTime;

  // Movimiento vertical oscilante con función seno
  const amplitude = 0.1; // cuánto se mueve arriba y abajo
  const speed = 0.005; // velocidad de oscilación
  const newY = -0.25 + amplitude * Math.sin(elapsed * speed);

  modelo.setAttribute('position', `0 ${newY} 0`);

  if (animationActive) {
    animationId = requestAnimationFrame(animateModel);
  }
}

animButton.addEventListener('click', () => {
  if (!animationActive) {
    animationActive = true;
    startTime = null;
    animationId = requestAnimationFrame(animateModel);
  } else {
    animationActive = false;
    if (animationId) {
      cancelAnimationFrame(animationId);
      animationId = null;
    }
    // Reset posición original cuando pares la animación
    modelo.setAttribute('position', '0 -0.25 0');
  }
});
    });
  </script>
</body>
</html>
